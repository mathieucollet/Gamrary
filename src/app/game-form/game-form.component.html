<div class="games-container">
  <mat-card>

    <mat-card-header>
      <mat-card-title>Ajouter un nouveau jeu</mat-card-title>
    </mat-card-header>

    <mat-card-content>

      <form [formGroup]="gameForm" (ngSubmit)="isNew ? Submit() : Edit()">
        <mat-form-field class="fields">
          <mat-label>Nom</mat-label>
          <input matInput type="text" formControlName="title" id="title">
          <mat-error *ngIf="title.invalid">{{getTitleErrorMessage()}}</mat-error>
        </mat-form-field>

        <mat-form-field class="fields">
          <mat-label>Genres</mat-label>
          <mat-select formControlName="genres" multiple>
            <mat-option *ngFor="let genre of genresList" [value]="genre.id">{{genre.name}}</mat-option>
          </mat-select>
          <mat-hint>Vous pouvez en séléctionner plusieurs.</mat-hint>
          <mat-error *ngIf="genres.invalid">{{getTitleErrorMessage()}}</mat-error>
        </mat-form-field>

        <mat-form-field class="fields">
          <mat-label>Éditeur</mat-label>
          <mat-select formControlName="publisher">
            <mat-option *ngFor="let publisher of publishersList" [value]="publisher.id">
              {{publisher.name}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="publisher.invalid">{{getPublisherErrorMessage()}}</mat-error>
        </mat-form-field>

        <mat-form-field class="fields">
          <mat-label>Développeur</mat-label>
          <mat-select formControlName="developer">
            <mat-option *ngFor="let developer of developersList" [value]="developer.id">
              {{developer.name}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="developer.invalid">{{getDeveloperErrorMessage()}}</mat-error>
        </mat-form-field>

        <mat-form-field class="fields">
          <mat-label>Description</mat-label>
          <textarea matInput type="text" formControlName="description" id="description" placeholder="test"></textarea>
          <mat-hint>Entre 10 et 300 caractères.</mat-hint>
          <mat-error *ngIf="description.invalid">{{getDescriptionErrorMessage()}}</mat-error>
        </mat-form-field>

        <mat-form-field class="fields">
          <mat-label>Note</mat-label>
          <input matInput type="number" formControlName="note" id="note" placeholder="test" class="number-input">
          <span matSuffix>/ 10</span>
          <mat-hint>Note entre 0 et 10.</mat-hint>
          <mat-error *ngIf="note.invalid">{{getNoteErrorMessage()}}</mat-error>
        </mat-form-field>

        <mat-form-field class="fields">
          <mat-label>Url de l'image</mat-label>
          <input matInput type="text" formControlName="coverImage" id="coverImage" placeholder="test">
          <mat-hint>L'url est valide si elle s'affiche bien dans ce formulaire.</mat-hint>
          <mat-error *ngIf="coverImage.invalid">{{getCoverImageErrorMessage()}}</mat-error>
        </mat-form-field>

        <img mat-card-image [src]="coverImage.value">

        <div style="display:flex;justify-content:space-between;">
          <a mat-raised-button [routerLink]="['/product']">Retour</a>
          <button *ngIf="isNew" mat-raised-button color="primary" type="submit" [disabled]="!gameForm.valid">Ajouter le
            jeu
          </button>
          <button *ngIf="!isNew" mat-raised-button color="primary" type="submit" [disabled]="!gameForm.valid">Modifier
            le jeu
          </button>
        </div>

      </form>
    </mat-card-content>
  </mat-card>
</div>
